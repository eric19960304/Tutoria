{% extends 'base.html' %}

{% block title %}My Timetable{% endblock %}

{% block content %}


    <script type="text/javascript">
        function confirmCancelSession(){
            var s = $("input[name=session_id]:checked");
            return confirm("You selected "+s.length+" session(s), continue to cancel?");
        }
        function selectAll(){
            var status = $("#select_all").prop('checked') == true;
            if(status){
                $("input[type=checkbox]").each(function(){
                    $(this).prop('checked', true);
                })
            }else{
                $("input[type=checkbox]").each(function(){
                    $(this).prop('checked',false);
                })
            }

        }
    </script>

   {% if student_session_list %}

        All Booked Sessions:<br/><br/>

        <form action="{% url 'cancel_session' %}" method="post">
        {% csrf_token %}
            {% for s in student_session_list %}
                <input type="checkbox" name="session_id" value="{{s.id}}"/>{{s.getBookedDateStr}}:  
                {{s.getStartTimeStr}} - {{s.getEndTimeStr}} 
                ( with {{s.tutor.profile.getUserFullName}} )<br/>
            {% endfor %}
            <input type="checkbox" id="select_all" onclick="selectAll()"/> Select All 
            <br/><br/>
            <input type="submit" value="Cancel Session" onclick="return confirmCancelSession()">
        </form>
        <br/><br/>
    {% endif %}

    {% if tutor_session_list %}
    
        All Appointed Sessions:<br/><br/>

        {% for s in tutor_session_list %}
            {{s.getBookedDateStr}}:  
            {{s.getStartTimeStr}} - {{s.getEndTimeStr}} 
            ( with {{s.student.profile.getUsername}} )<br/>
        {% endfor %}
        <br/><br/>
    {% endif %}

    {% if not tutor_session_list and not student_session_list %}
        <p>You don't have any session yet.</p>
    {% endif %}

    
{% endblock %}
